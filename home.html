<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - RijanTudy</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="background-animation"></div>

    <!-- Agreement Modal (Overlay) -->
    <div id="agreement-modal" class="agreement-modal">
        <div class="modal-content">
            <h2>Welcome to RijanTudy</h2>
            <p>Please review our <a href="termpolicy.html" target="_blank">Terms & Policy</a> before proceeding.</p>
            <button id="agree-btn" class="primary-btn">I Agree</button>
        </div>
    </div>

    <!-- Main Content (Hidden initially or blurred) -->
    <div class="container home-container">
        <header class="home-header">
            <div class="logo-area">
                <i class="fa-solid fa-graduation-cap logo-icon"></i>
                <div class="logo-text">
                    <h1>RijanTudy</h1>
                    <p>Study Theme Class 11, 12</p>
                </div>
            </div>
            <button id="logout-btn" class="logout-btn">Logout</button>
        </header>

        <main class="home-main">
            <h2>Welcome, Student!</h2>
            <div class="content-grid">
                <!-- Example Content Cards -->
                <div class="card">
                    <h3>Class 11 Resources</h3>
                    <p>Access notes, books, and past papers.</p>
                </div>
                <div class="card">
                    <h3>Class 12 Resources</h3>
                    <p>Prepare for your board exams with curated content.</p>
                </div>
            </div>
        </main>

        <footer class="home-footer">
            <p>Inspired by <strong>Khadga Smriti Ma.Vi</strong></p>
            <div class="school-branding">
                <i class="fa-solid fa-school"></i>
                <span>KSMV</span>
            </div>
        </footer>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // Reuse config from script.js logic (or import it if modularized properly, simpler to redeclare or use global for this check)
        const firebaseConfig = {
            apiKey: "AIzaSyAv0VgjlrVa0Y2I_Goz_wYeDZELaF1PeGI",
            authDomain: "rijantube.firebaseapp.com",
            databaseURL: "https://rijantube-default-rtdb.firebaseio.com",
            projectId: "rijantube",
            storageBucket: "rijantube.firebasestorage.app",
            messagingSenderId: "771829227024",
            appId: "1:771829227024:web:50a43c77508685d4a2b495",
            measurementId: "G-DE4XKGNLH1"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Agreement Logic
        const modal = document.getElementById('agreement-modal');
        const agreeBtn = document.getElementById('agree-btn');

        // MVP: Simple local storage check or session check
        // For strict "always show", remove the check
        agreeBtn.addEventListener('click', () => {
            modal.style.opacity = '0';
            setTimeout(() => {
                modal.style.display = 'none';
            }, 500);
        });

        // Logout
        document.getElementById('logout-btn').addEventListener('click', () => {
            signOut(auth).then(() => {
                window.location.href = "index.html";
            }).catch((error) => {
                console.error("Logout Error", error);
            });
        });

        // Auth Check
        onAuthStateChanged(auth, (user) => {
            if (!user) {
                // User is not signed in, redirect to login
                window.location.href = "index.html";
            } else {
                // User is signed in
                console.log("Current User:", user.email);
            }
        });
    </script>
</body>

</html>