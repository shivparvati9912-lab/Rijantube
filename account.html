<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account - RijanTudy</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Specific page override if needed */
        .container {
            display: block;
            padding-top: 60px;
            overflow-y: auto;
            text-align: left;
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
                padding-top: 20px;
            }
        }
    </style>
</head>

<body>
    <div class="background-animation"></div>

    <div class="container">
        <div class="form-wrapper" style="max-width: 600px; margin: 0 auto;">
            <!-- Header -->
            <div class="subject-header">
                <a href="home.html" class="back-btn">
                    <i class="fa-solid fa-arrow-left"></i>
                </a>
                <div class="subject-title">
                    <h1>Account</h1>
                    <p>Principles & Practice</p>
                </div>
            </div>

            <!-- Accordion -->
            <div class="accordion-container">
                <!-- Video Section -->
                <div class="accordion-item">
                    <button class="accordion-btn">
                        <div class="btn-content">
                            <div class="accordion-icon" style="background: rgba(239,68,68,0.1); color: #ef4444;">
                                <i class="fa-brands fa-youtube"></i>
                            </div>
                            <span>Video Resources</span>
                        </div>
                        <i class="fa-solid fa-chevron-down chevron-icon"></i>
                    </button>
                    <div class="panel">
                        <div class="panel-content">
                            <div class="file-item" onclick="openVideo('https://www.youtube.com/embed/4kgfnLpRUn8')">
                                <i class="fa-brands fa-youtube" style="color: #ef4444;"></i>
                                <span>Journal Entry</span>
                            </div>
                            <div class="file-item" onclick="openVideo('https://www.youtube.com/embed/aID7FHQC64I')">
                                <i class="fa-brands fa-youtube" style="color: #ef4444;"></i>
                                <span>Journal Entry Solutions</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notes Section -->
                <div class="accordion-item">
                    <button class="accordion-btn">
                        <div class="btn-content">
                            <div class="accordion-icon" style="background: rgba(16,185,129,0.1); color: #10b981;">
                                <i class="fa-solid fa-file-lines"></i>
                            </div>
                            <span>Notes & PDF</span>
                        </div>
                        <i class="fa-solid fa-chevron-down chevron-icon"></i>
                    </button>
                    <div class="panel">
                        <div class="panel-content">
                            <div class="empty-folder">
                                <i class="fa-solid fa-folder-open"></i>
                                <p>No notes available yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Modal -->
    <div id="video-modal" class="video-modal">
        <div class="video-modal-content">
            <button class="video-close-btn" onclick="closeVideo()">
                <i class="fa-solid fa-xmark"></i>
            </button>

            <!-- Custom Video Controls Overlay -->
            <div id="custom-controls" class="custom-video-controls">
                <div class="video-top-bar">
                    <div class="rijantube-branding">
                        <i class="fa-solid fa-play-circle"></i>
                        <span>Rijantube</span>
                    </div>
                </div>

                <div class="video-center-controls">
                    <button class="skip-btn skip-backward" onclick="skipVideo(-10)">
                        <i class="fa-solid fa-rotate-left"></i>
                        <span>10</span>
                    </button>
                    <button class="play-pause-btn" id="play-pause-btn" onclick="togglePlayPause()">
                        <i class="fa-solid fa-play"></i>
                    </button>
                    <button class="skip-btn skip-forward" onclick="skipVideo(10)">
                        <i class="fa-solid fa-rotate-right"></i>
                        <span>10</span>
                    </button>
                </div>

                <div class="video-bottom-bar">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <div class="video-time">
                        <span id="current-time">0:00</span>
                        <span>/</span>
                        <span id="duration-time">0:00</span>
                    </div>
                </div>

                <!-- Skip Animation Overlay -->
                <div class="skip-animation" id="skip-animation">
                    <i class="fa-solid fa-rotate-right"></i>
                    <span id="skip-text">+10s</span>
                </div>
            </div>

            <div id="video-player"></div>
        </div>
    </div>

    <!-- Simple Accordion Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const acc = document.getElementsByClassName("accordion-btn");
            for (let i = 0; i < acc.length; i++) {
                acc[i].addEventListener("click", function () {
                    // Close others (optional, nice for "mini opener")
                    // remove if you want multiple open

                    this.classList.toggle("active");
                    const panel = this.nextElementSibling;
                    if (panel.style.maxHeight) {
                        panel.style.maxHeight = null;
                        panel.classList.remove('open');
                    } else {
                        panel.style.maxHeight = panel.scrollHeight + "px";
                        panel.classList.add('open');
                    }
                });
            }
        });

        // YouTube Player API
        let player;
        let controlsTimeout;

        // Load YouTube API
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // API Ready callback
        window.onYouTubeIframeAPIReady = function () {
            console.log('YouTube API Ready');
        };

        // Video Modal Functions
        function openVideo(videoUrl) {
            const modal = document.getElementById('video-modal');
            const customControls = document.getElementById('custom-controls');

            // Extract video ID from URL
            const videoId = videoUrl.match(/embed\/([^?]+)/)[1];

            modal.classList.add('active');

            // Initialize YouTube player
            player = new YT.Player('video-player', {
                height: '100%',
                width: '100%',
                videoId: videoId,
                playerVars: {
                    'autoplay': 1,
                    'controls': 0,  // Hide YouTube controls
                    'modestbranding': 1,
                    'rel': 0,
                    'showinfo': 0,
                    'fs': 0,  // Hide fullscreen button
                    'iv_load_policy': 3,  // Hide annotations
                    'disablekb': 1  // Disable keyboard
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });

            // Show/hide controls on click
            customControls.addEventListener('click', showControls);
        }

        function onPlayerReady(event) {
            updateVideoTime();
            setInterval(updateVideoTime, 1000);
        }

        function onPlayerStateChange(event) {
            const playPauseBtn = document.getElementById('play-pause-btn');
            if (event.data === YT.PlayerState.PLAYING) {
                playPauseBtn.innerHTML = '<i class="fa-solid fa-pause"></i>';
            } else {
                playPauseBtn.innerHTML = '<i class="fa-solid fa-play"></i>';
            }
        }

        function togglePlayPause() {
            if (player.getPlayerState() === YT.PlayerState.PLAYING) {
                player.pauseVideo();
            } else {
                player.playVideo();
            }
        }

        function skipVideo(seconds) {
            const currentTime = player.getCurrentTime();
            player.seekTo(currentTime + seconds, true);
            showSkipAnimation(seconds);
        }

        function showSkipAnimation(seconds) {
            const skipAnim = document.getElementById('skip-animation');
            const skipText = document.getElementById('skip-text');
            const icon = skipAnim.querySelector('i');

            if (seconds > 0) {
                icon.className = 'fa-solid fa-rotate-right';
                skipText.textContent = `+${seconds}s`;
            } else {
                icon.className = 'fa-solid fa-rotate-left';
                skipText.textContent = `${seconds}s`;
            }

            skipAnim.classList.add('show');
            setTimeout(() => {
                skipAnim.classList.remove('show');
            }, 500);
        }

        function updateVideoTime() {
            if (!player || !player.getCurrentTime) return;

            const current = player.getCurrentTime();
            const duration = player.getDuration();
            const progress = (current / duration) * 100;

            document.getElementById('current-time').textContent = formatTime(current);
            document.getElementById('duration-time').textContent = formatTime(duration);
            document.getElementById('progress-bar').style.width = progress + '%';
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function showControls() {
            const controls = document.getElementById('custom-controls');
            controls.classList.add('visible');

            clearTimeout(controlsTimeout);
            controlsTimeout = setTimeout(() => {
                controls.classList.remove('visible');
            }, 3000);
        }

        function closeVideo() {
            const modal = document.getElementById('video-modal');
            if (player) {
                player.destroy();
                player = null;
            }
            modal.classList.remove('active');
        }

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeVideo();
            }
        });
    </script>
</body>

</html>